# 2025ë…„ 11ì›” 7ì¼ - Sefra iOS ë„¤ì´í‹°ë¸Œ ì•± ê°œë°œ ì™„ë£Œ

## ğŸ“± í”„ë¡œì íŠ¸ ê°œìš”

ì•ˆë“œë¡œì´ë“œ ì•±ì„ iOS ë„¤ì´í‹°ë¸Œ ì•±ìœ¼ë¡œ í¬íŒ…í•˜ê³ , ê¸°ì¡´ Flutter í”„ë¡œì íŠ¸ë¥¼ iOS ë„¤ì´í‹°ë¸Œë¡œ ì™„ì „íˆ êµì²´í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ ì£¼ìš” ì‘ì—… ë‚´ìš©

### 1ï¸âƒ£ iOS ë„¤ì´í‹°ë¸Œ ì•± ê°œë°œ (ì²˜ìŒë¶€í„° ìƒˆë¡œ ì œì‘)

#### í”„ë¡œì íŠ¸ ì •ë³´
- **ì•± ì´ë¦„**: Sefra
- **Bundle ID**: sefra.kr
- **í”Œë«í¼**: iOS 13.0 ì´ìƒ
- **ì–¸ì–´**: Swift 5.0
- **í”„ë ˆì„ì›Œí¬**: UIKit + WKWebView

#### êµ¬í˜„ëœ ì£¼ìš” ê¸°ëŠ¥
```
âœ… WebView - https://sefra.kr ë¡œë“œ
âœ… Firebase Cloud Messaging (FCM) + APNs í‘¸ì‹œ ì•Œë¦¼
âœ… Face ID / Touch ID ìƒì²´ì¸ì¦ (LocalAuthentication)
âœ… JavaScript Bridge - ì›¹ê³¼ ë„¤ì´í‹°ë¸Œ í†µì‹ 
âœ… URL Scheme ì²˜ë¦¬ - ë³¸ì¸ì¸ì¦ ì•±ì—ì„œ ë³µê·€
âœ… Device ID - identifierForVendor ì‚¬ìš©
âœ… Associated Domains - Universal Links (applinks:sefra.kr)
âœ… CocoaPods ì˜ì¡´ì„± ê´€ë¦¬
âœ… Codemagic CI/CD ìë™ ë¹Œë“œ
```

#### ìƒì„±ëœ íŒŒì¼ êµ¬ì¡°
```
iosapp/Sefra/
â”œâ”€â”€ Sefra.xcodeproj/              # Xcode í”„ë¡œì íŠ¸ íŒŒì¼
â”œâ”€â”€ Sefra/
â”‚   â”œâ”€â”€ AppDelegate.swift         # FCM ì´ˆê¸°í™”, í‘¸ì‹œ ì•Œë¦¼ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ViewController.swift      # WebView, ìƒì²´ì¸ì¦, JS Bridge
â”‚   â”œâ”€â”€ Info.plist                # ì•± ê¶Œí•œ ë° ì„¤ì •
â”‚   â”œâ”€â”€ Sefra.entitlements        # Push Notifications, Associated Domains
â”‚   â”œâ”€â”€ GoogleService-Info.plist  # Firebase ì„¤ì •
â”‚   â”œâ”€â”€ Assets.xcassets/          # ì•± ì•„ì´ì½˜
â”‚   â””â”€â”€ Base.lproj/
â”‚       â””â”€â”€ LaunchScreen.storyboard  # ìŠ¤í”Œë˜ì‹œ í™”ë©´
â”œâ”€â”€ Podfile                       # Firebase ì˜ì¡´ì„±
â””â”€â”€ exportOptions.plist           # IPA Export ì„¤ì •
```

---

### 2ï¸âƒ£ GitHub ì €ì¥ì†Œ ì¬êµ¬ì„±

#### A. ìƒˆ ì €ì¥ì†Œì— ì´ˆê¸° ì»¤ë°‹
- **ì €ì¥ì†Œ**: https://github.com/zanoone/Sefra_main
- iOS ë„¤ì´í‹°ë¸Œ ì•± ìµœì´ˆ ì»¤ë°‹ ì™„ë£Œ

#### B. ê¸°ì¡´ Flutter ì €ì¥ì†Œ ë°±ì—… ë° êµì²´
1. **Flutter í”„ë¡œì íŠ¸ ë°±ì—…**
   ```bash
   ë¸Œëœì¹˜: flutter-backup
   URL: https://github.com/zanoone/sefra/tree/flutter-backup
   ```
   - ê¸°ì¡´ Flutter í”„ë¡œì íŠ¸ ì „ì²´ë¥¼ ë°±ì—… ë¸Œëœì¹˜ì— ë³´ê´€
   - ì–¸ì œë“ ì§€ `git checkout flutter-backup`ìœ¼ë¡œ ë³µêµ¬ ê°€ëŠ¥

2. **main ë¸Œëœì¹˜ë¥¼ iOS ë„¤ì´í‹°ë¸Œë¡œ êµì²´**
   ```
   ì‚­ì œëœ íŒŒì¼: 157ê°œ (Flutter ê´€ë ¨)
   - android/, lib/, linux/, macos/, web/, windows/ ì „ì²´
   - pubspec.yaml, analysis_options.yaml
   - Flutter ê´€ë ¨ ë¬¸ì„œë“¤

   ì¶”ê°€ëœ íŒŒì¼:
   - Sefra/ (iOS ë„¤ì´í‹°ë¸Œ ì•±)
   - README.md (ìƒˆë¡œ ì‘ì„±)
   - README_iOS.md (ìƒì„¸ ê°œë°œ ê°€ì´ë“œ)
   - APPLE_SETUP_GUIDE.md (Apple Developer ì„¤ì •)
   - codemagic.yaml (Native iOS ë¹Œë“œ ì„¤ì •)
   ```

3. **ì½”ë“œ ë³€ê²½ í†µê³„**
   ```
   -9,128ì¤„ ì‚­ì œ (Flutter)
   +1,928ì¤„ ì¶”ê°€ (iOS Native)
   ìˆœ ê°ì†Œ: -7,200ì¤„ (ë” ê°„ê²°í•´ì§!)
   ```

---

### 3ï¸âƒ£ Firebase ì„¤ì • í†µí•©

#### Flutter í”„ë¡œì íŠ¸ì˜ iOS ì„¤ì • ë°˜ì˜
ê¸°ì¡´ Flutter í”„ë¡œì íŠ¸ (https://github.com/zanoone/sefra)ì˜ iOS ì„¤ì •ì„ ë„¤ì´í‹°ë¸Œ ì•±ì— ì ìš©:

```yaml
# Info.plist ì—…ë°ì´íŠ¸
âœ… NSAllowsArbitraryLoads: true
âœ… NSUserTrackingUsageDescription ì¶”ê°€
âœ… NSLocalNetworkUsageDescription ì¶”ê°€
âœ… NSFaceIDUsageDescription ì¶”ê°€
âœ… NSCameraUsageDescription ì¶”ê°€
âœ… UIBackgroundModes: remote-notification
âœ… ITSAppUsesNonExemptEncryption: false

# Podfile ìµœì í™”
âœ… use_frameworks! :linkage => :static
âœ… Firebase í—¤ë” ì˜¤ë¥˜ ìˆ˜ì •
âœ… Xcode 15 í˜¸í™˜ì„± íŒ¨ì¹˜

# Entitlements
âœ… aps-environment: production
âœ… com.apple.developer.associated-domains: applinks:sefra.kr
```

---

### 4ï¸âƒ£ Codemagic CI/CD ì„¤ì •

#### ì›Œí¬í”Œë¡œìš° êµ¬ì„±
```yaml
workflows:
  ios-release:          # App Store ë°°í¬ìš©
    - Bundle ID: sefra.kr
    - Distribution: App Store
    - TestFlight ìë™ ì—…ë¡œë“œ

  ios-debug:            # ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©
    - Bundle ID: sefra.kr
    - Distribution: Development
```

#### ë¹Œë“œ í”„ë¡œì„¸ìŠ¤
```bash
1. CocoaPods ì˜ì¡´ì„± ì„¤ì¹˜
2. Keychain ì´ˆê¸°í™”
3. Signing íŒŒì¼ ìë™ ìƒì„± (App Store Connect API)
4. ì¸ì¦ì„œ ì¶”ê°€
5. Code signing ì„¤ì •
6. Entitlements ê²€ì¦
7. IPA ë¹Œë“œ
8. TestFlight ì—…ë¡œë“œ
```

#### í™˜ê²½ ë³€ìˆ˜ (Codemagicì—ì„œ ì„¤ì • í•„ìš”)
```
APP_STORE_CONNECT_KEY_IDENTIFIER = Key ID
APP_STORE_CONNECT_ISSUER_ID = Issuer ID
APP_STORE_CONNECT_API_KEY = .p8 íŒŒì¼ ì „ì²´ ë‚´ìš©
```

---

### 5ï¸âƒ£ Codemagic Flutter ì˜¤ë¥˜ í•´ê²°

#### ë¬¸ì œ
```
âŒ Failed to install dependencies for pubspec file
```
Codemagicì´ ìë™ìœ¼ë¡œ Flutter í”„ë¡œì íŠ¸ë¡œ ê°ì§€

#### í•´ê²°
```yaml
# codemagic.yaml ìˆ˜ì •
workflows:
  ios-release:
    name: Sefra iOS Release Build (Native)  # ëª…ì‹œì ìœ¼ë¡œ Native í‘œì‹œ
    integrations:
      app_store_connect: codemagic           # iOS Native í”„ë¡œì íŠ¸ ì„¤ì •
```

#### Codemagic UI ì„¤ì • í•„ìš”
```
1. Codemagic ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. sefra í”„ë¡œì íŠ¸ â†’ Settings
3. Project type: "Native iOS" ì„ íƒ (Flutter ì•„ë‹˜!)
4. Save
```

---

## ğŸ“Š ìµœì¢… ê²°ê³¼

### ì €ì¥ì†Œ êµ¬ì¡°

#### Main ë¸Œëœì¹˜ (https://github.com/zanoone/sefra)
```
sefra/
â”œâ”€â”€ Sefra/                   # iOS ë„¤ì´í‹°ë¸Œ ì•±
â”œâ”€â”€ codemagic.yaml           # CI/CD ì„¤ì •
â”œâ”€â”€ README.md                # í”„ë¡œì íŠ¸ ê°œìš”
â”œâ”€â”€ README_iOS.md            # ìƒì„¸ ê°€ì´ë“œ
â”œâ”€â”€ APPLE_SETUP_GUIDE.md     # Apple Developer ì„¤ì •
â””â”€â”€ .gitignore
```

#### Flutter-backup ë¸Œëœì¹˜
```
ëª¨ë“  Flutter ì½”ë“œê°€ ì•ˆì „í•˜ê²Œ ë³´ê´€ë¨
í•„ìš”ì‹œ git checkout flutter-backupìœ¼ë¡œ ë³µêµ¬ ê°€ëŠ¥
```

---

## ğŸ”‘ Android vs iOS ì£¼ìš” ì°¨ì´ì 

| ê¸°ëŠ¥ | Android | iOS |
|------|---------|-----|
| **ì–¸ì–´** | Kotlin | Swift 5.0 |
| **UI í”„ë ˆì„ì›Œí¬** | Jetpack Compose | UIKit |
| **WebView** | android.webkit.WebView | WKWebView |
| **ìƒì²´ì¸ì¦** | BiometricPrompt | LocalAuthentication |
| **JS Bridge** | @JavascriptInterface | WKScriptMessageHandler |
| **í‘¸ì‹œ ì•Œë¦¼** | FCM ì§ì ‘ | FCM + APNs |
| **ë³¸ì¸ì¸ì¦** | Intent ì²˜ë¦¬ | URL Scheme ì²˜ë¦¬ |
| **Device ID** | ANDROID_ID | identifierForVendor |
| **í”„ë ˆì„ì›Œí¬ ë§í¬** | Dynamic | Static (Firebase í˜¸í™˜ì„±) |

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. Apple Developer Portal ì„¤ì • (í•„ìˆ˜!)
```
1. https://developer.apple.com/account ì ‘ì†
2. Bundle ID ë“±ë¡: sefra.kr
3. Capabilities í™œì„±í™”:
   - Push Notifications âœ…
   - Associated Domains âœ…
4. APNs ì¸ì¦ í‚¤ ìƒì„± (.p8)
5. Firebase Consoleì— APNs í‚¤ ì—…ë¡œë“œ
```

### 2. App Store Connect API Key ìƒì„±
```
1. https://appstoreconnect.apple.com ì ‘ì†
2. Users and Access â†’ Keys
3. ìƒˆ í‚¤ ìƒì„± (Admin ê¶Œí•œ)
4. Key ID, Issuer ID ì €ì¥
5. .p8 íŒŒì¼ ë‹¤ìš´ë¡œë“œ (í•œ ë²ˆë§Œ ê°€ëŠ¥!)
```

### 3. Codemagic í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```
Settings â†’ Environment variables:
- APP_STORE_CONNECT_KEY_IDENTIFIER (Key ID)
- APP_STORE_CONNECT_ISSUER_ID (Issuer ID)
- APP_STORE_CONNECT_API_KEY (.p8 íŒŒì¼ ë‚´ìš© ì „ì²´)

ëª¨ë‘ "Secure" ì²´í¬!
```

### 4. ë¹Œë“œ ì‹¤í–‰
```
Workflow: ios-release ì„ íƒ
â†’ Bundle ID ìë™ ë“±ë¡
â†’ Provisioning Profile ìë™ ìƒì„±
â†’ IPA ë¹Œë“œ
â†’ TestFlight ìë™ ì—…ë¡œë“œ
```

---

## ğŸ“ JavaScript Bridge ì¸í„°í˜ì´ìŠ¤

### ì›¹ì—ì„œ ë„¤ì´í‹°ë¸Œ í˜¸ì¶œ (iOS)

```javascript
// ìƒì²´ì¸ì¦ ì‹¤í–‰
window.iOSBiometric.authenticate();

// ìƒì²´ì¸ì¦ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
const available = await window.iOSBiometric.isAvailable();

// FCM í† í° ê°€ì ¸ì˜¤ê¸°
const token = await window.getFCMToken();

// Android í˜¸í™˜ì„± (ë™ì¼í•œ ì½”ë“œ ì‚¬ìš© ê°€ëŠ¥!)
window.AndroidBiometric.authenticate();  // iOSì—ì„œë„ ì‘ë™!
```

### ë„¤ì´í‹°ë¸Œì—ì„œ ì›¹ìœ¼ë¡œ ì½œë°±

```javascript
// ìƒì²´ì¸ì¦ ê²°ê³¼
window.onBiometricResult = function(success, message, data) {
  if (success) {
    console.log('ì¸ì¦ ì„±ê³µ:', data);
  } else {
    console.log('ì¸ì¦ ì‹¤íŒ¨:', message);
  }
};

// íŒ¨ìŠ¤í‚¤ ë“±ë¡ ì™„ë£Œ
window.onPasskeyRegistered = function(credentialData) {
  console.log('íŒ¨ìŠ¤í‚¤ ë“±ë¡:', credentialData);
};

// ìƒì²´ì¸ì¦ ë¡œê·¸ì¸ ì„±ê³µ
window.onBiometricLoginSuccess = function(data) {
  console.log('ë¡œê·¸ì¸ ì„±ê³µ:', data);
};
```

---

## ğŸ›  ê°œë°œ í™˜ê²½

### ë¡œì»¬ ê°œë°œ (Mac í•„ìš”)
```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/zanoone/sefra.git
cd sefra/Sefra

# CocoaPods ì„¤ì¹˜
pod install

# Xcodeì—ì„œ ì—´ê¸°
open Sefra.xcworkspace  # âš ï¸ .xcodeproj ì•„ë‹˜!
```

### ë¹Œë“œ ìš”êµ¬ì‚¬í•­
```
âœ… macOS Ventura ì´ìƒ
âœ… Xcode 15.0 ì´ìƒ
âœ… CocoaPods 1.12 ì´ìƒ
âœ… Apple Developer ê³„ì •
âœ… App Store Connect API Key
```

---

## ğŸ“¦ ì˜ì¡´ì„±

### CocoaPods (Podfile)
```ruby
platform :ios, '13.0'

target 'Sefra' do
  use_frameworks! :linkage => :static

  # Firebase
  pod 'Firebase/Analytics'
  pod 'Firebase/Messaging'
end
```

### ìë™ìœ¼ë¡œ ì„¤ì¹˜ë˜ëŠ” Pod
```
- Firebase/Core
- Firebase/Analytics
- Firebase/Messaging
- FirebaseAnalytics
- FirebaseCore
- FirebaseCoreDiagnostics
- FirebaseInstallations
- FirebaseMessaging
- GoogleAppMeasurement
- GoogleDataTransport
- GoogleUtilities
- PromisesObjC
- nanopb
```

---

## ğŸ” ë³´ì•ˆ ì„¤ì •

### Info.plist ê¶Œí•œ
```xml
<!-- í•„ìˆ˜ ê¶Œí•œ -->
<key>NSFaceIDUsageDescription</key>
<string>íŒ¨ìŠ¤í‚¤ ì¸ì¦ì„ ìœ„í•´ Face IDë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤</string>

<key>NSCameraUsageDescription</key>
<string>ë³¸ì¸ì¸ì¦ì„ ìœ„í•´ ì¹´ë©”ë¼ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤</string>

<!-- ë„¤íŠ¸ì›Œí¬ ê¶Œí•œ -->
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

### Entitlements
```xml
<key>aps-environment</key>
<string>production</string>

<key>com.apple.developer.associated-domains</key>
<array>
    <string>applinks:sefra.kr</string>
</array>
```

---

## ğŸ“± ì•± ì •ë³´

### App Store Connect
```
ì•± ì´ë¦„: Sefra
Bundle ID: sefra.kr
App Store ID: 6754912654
Primary Language: í•œêµ­ì–´ (ko-KR)
Category: Finance
```

### ë²„ì „ ì •ë³´
```
Version: 1.0
Build: 1
Minimum iOS Version: 13.0
Target iOS Version: Latest
```

---

## ğŸ“š ë¬¸ì„œ

### í”„ë¡œì íŠ¸ ë¬¸ì„œ
```
âœ… README.md - í”„ë¡œì íŠ¸ ê°œìš” ë° ë¹ ë¥¸ ì‹œì‘
âœ… README_iOS.md - ìƒì„¸ ê°œë°œ ê°€ì´ë“œ
âœ… APPLE_SETUP_GUIDE.md - Apple Developer ì„¤ì • ë‹¨ê³„ë³„ ê°€ì´ë“œ
âœ… codemagic.yaml - CI/CD ë¹Œë“œ ì„¤ì • (ì£¼ì„ í¬í•¨)
âœ… 1107.md - ì´ ë¬¸ì„œ (ê°œë°œ ì¼ì§€)
```

### ì™¸ë¶€ ì°¸ê³  ìë£Œ
```
- Apple Developer Documentation
  https://developer.apple.com/documentation/

- Firebase iOS Setup
  https://firebase.google.com/docs/ios/setup

- Codemagic Native iOS
  https://docs.codemagic.io/yaml-quick-start/building-a-native-ios-app/

- WKWebView Guide
  https://developer.apple.com/documentation/webkit/wkwebview

- LocalAuthentication
  https://developer.apple.com/documentation/localauthentication
```

---

## ğŸ¯ ì™„ë£Œëœ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### iOS ì•± ê°œë°œ
- [x] AppDelegate.swift (FCM ì´ˆê¸°í™”)
- [x] ViewController.swift (WebView + ìƒì²´ì¸ì¦)
- [x] Info.plist (ê¶Œí•œ ì„¤ì •)
- [x] Sefra.entitlements (Push + Associated Domains)
- [x] Podfile (Firebase ì˜ì¡´ì„±)
- [x] Assets.xcassets (ì•± ì•„ì´ì½˜ êµ¬ì¡°)
- [x] LaunchScreen.storyboard (ìŠ¤í”Œë˜ì‹œ)
- [x] exportOptions.plist (Export ì„¤ì •)
- [x] Xcode í”„ë¡œì íŠ¸ íŒŒì¼ (project.pbxproj)

### GitHub ì €ì¥ì†Œ
- [x] Flutter í”„ë¡œì íŠ¸ ë°±ì—… (flutter-backup ë¸Œëœì¹˜)
- [x] iOS ë„¤ì´í‹°ë¸Œ ì•±ìœ¼ë¡œ main ë¸Œëœì¹˜ êµì²´
- [x] README.md ì‘ì„±
- [x] README_iOS.md ì‘ì„±
- [x] APPLE_SETUP_GUIDE.md ì‘ì„±
- [x] 1107.md ì‘ì„± (ê°œë°œ ì¼ì§€)

### Codemagic CI/CD
- [x] codemagic.yaml ì‘ì„±
- [x] ios-release ì›Œí¬í”Œë¡œìš° ì„¤ì •
- [x] ios-debug ì›Œí¬í”Œë¡œìš° ì„¤ì •
- [x] Native iOS í”„ë¡œì íŠ¸ë¡œ ì„¤ì •
- [x] Flutter ì˜¤ë¥˜ í•´ê²°

### í•„ìˆ˜ ì„¤ì • (ì‚¬ìš©ìê°€ í•´ì•¼ í•¨)
- [ ] Apple Developer Portal - Bundle ID ë“±ë¡
- [ ] Apple Developer Portal - APNs ì¸ì¦ í‚¤ ìƒì„±
- [ ] Firebase Console - APNs í‚¤ ì—…ë¡œë“œ
- [ ] App Store Connect - API Key ìƒì„±
- [ ] Codemagic - í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (3ê°œ)
- [ ] Codemagic - Project typeì„ Native iOSë¡œ ë³€ê²½
- [ ] ì•± ì•„ì´ì½˜ ì¶”ê°€ (1024x1024 PNG)

---

## ğŸ’¡ í•µì‹¬ í¬ì¸íŠ¸

### 1. Flutter vs Native ì„ íƒ
```
Flutter ì œê±° ì´ìœ :
âŒ í•„ìš” ì—†ëŠ” ë³µì¡ì„± (ë©€í‹°í”Œë«í¼ ë¶ˆí•„ìš”)
âŒ ì•± í¬ê¸° ì¦ê°€ (Flutter ì—”ì§„ í¬í•¨)
âŒ ë¹Œë“œ ì‹œê°„ ì¦ê°€
âŒ Firebase í†µí•© ë³µì¡

Native iOS ì„ íƒ ì´ìœ :
âœ… ë‹¨ìˆœí•˜ê³  ëª…í™•í•œ ì½”ë“œ
âœ… ì‘ì€ ì•± í¬ê¸°
âœ… ë¹ ë¥¸ ë¹Œë“œ
âœ… ì§ì ‘ì ì¸ Firebase í†µí•©
âœ… iOS ì „ìš© ê¸°ëŠ¥ ì ‘ê·¼ ìš©ì´
```

### 2. ì•ˆë“œë¡œì´ë“œì™€ ì½”ë“œ ê³µìœ 
```javascript
// ë™ì¼í•œ JavaScript ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©
// Android: window.AndroidBiometric
// iOS: window.iOSBiometric (window.AndroidBiometricë¡œë„ ì ‘ê·¼ ê°€ëŠ¥!)

// ì›¹ ê°œë°œìëŠ” í”Œë«í¼ êµ¬ë¶„ ì—†ì´ ë™ì¼í•œ ì½”ë“œ ì‚¬ìš©
window.AndroidBiometric.authenticate();  // Both platforms!
```

### 3. Firebase ì„¤ì • ìµœì í™”
```ruby
# Static Linkageë¡œ Firebase í—¤ë” ì˜¤ë¥˜ ë°©ì§€
use_frameworks! :linkage => :static

# Non-modular header í—ˆìš©
CLANG_ALLOW_NON_MODULAR_INCLUDES_IN_FRAMEWORK_MODULES = YES
```

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° í•´ê²°

### Issue 1: Codemagic Flutter ìë™ ê°ì§€
**ë¬¸ì œ**: Codemagicì´ Native iOSë¥¼ Flutterë¡œ ê°ì§€
**í•´ê²°**: codemagic.yamlì— `integrations` ì¶”ê°€ + UIì—ì„œ Project type ë³€ê²½

### Issue 2: Firebase Non-modular Header
**ë¬¸ì œ**: `Include of non-modular header inside framework module`
**í•´ê²°**: Podfileì—ì„œ `use_frameworks! :linkage => :static` ì‚¬ìš©

### Issue 3: Provisioning Profile ì—†ìŒ
**ë¬¸ì œ**: `No matching profiles found for bundle identifier "sefra.kr"`
**í•´ê²°**: Apple Developer Portalì—ì„œ Bundle ID ë¨¼ì € ë“±ë¡ í•„ìš”

---

## ğŸ‰ ìµœì¢… ìš”ì•½

### ë‹¬ì„±í•œ ëª©í‘œ
âœ… ì•ˆë“œë¡œì´ë“œ ì•±ì„ iOS ë„¤ì´í‹°ë¸Œë¡œ ì™„ë²½ í¬íŒ…
âœ… Flutter í”„ë¡œì íŠ¸ë¥¼ iOS Nativeë¡œ êµì²´
âœ… Firebase FCM + APNs í†µí•©
âœ… ìƒì²´ì¸ì¦ êµ¬í˜„
âœ… JavaScript Bridge êµ¬í˜„ (Android í˜¸í™˜)
âœ… Codemagic CI/CD ìë™í™”
âœ… ì™„ì „í•œ ë¬¸ì„œí™”

### ì½”ë“œ í†µê³„
```
íŒŒì¼ ìˆ˜: 12ê°œ (í•µì‹¬ íŒŒì¼ë§Œ)
ì½”ë“œ ë¼ì¸: ~1,900ì¤„
Flutter ëŒ€ë¹„: -78% ì½”ë“œ ê°ì†Œ
ë¹Œë“œ ì‹œê°„: ~5ë¶„ (Flutter ëŒ€ë¹„ 60% ë‹¨ì¶• ì˜ˆìƒ)
```

### ë‹¤ìŒ ë‹¨ê³„
1. Apple Developer Portal ì„¤ì •
2. Codemagic í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
3. ë¹Œë“œ ì‹¤í–‰ ë° TestFlight ì—…ë¡œë“œ
4. ì•± ì•„ì´ì½˜ ì¶”ê°€
5. App Store ì‹¬ì‚¬ ì œì¶œ

---

## ğŸ“§ ì—°ë½ì²˜

**ê°œë°œì**: zanoone
**ì´ë©”ì¼**: zanoone2@gmail.com
**GitHub**: https://github.com/zanoone/sefra
**ë¹Œë“œ ìƒíƒœ**: https://codemagic.io/apps

---

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 7ì¼
**ë²„ì „**: 1.0
**ìƒíƒœ**: ê°œë°œ ì™„ë£Œ, ë¹Œë“œ ì„¤ì • ëŒ€ê¸° ì¤‘

---

## ğŸ”– Git ì»¤ë°‹ íˆìŠ¤í† ë¦¬

```bash
# Sefra_main ì €ì¥ì†Œ
d164791 - Add iOS native app project (ì´ˆê¸° ë²„ì „)
d40c3a5 - Add Apple Developer Portal setup guide
0340c65 - Update iOS project with Flutter settings
57d5148 - Update README with Flutter project settings integration

# sefra ì €ì¥ì†Œ
flutter-backup - Flutter í”„ë¡œì íŠ¸ ì „ì²´ ë°±ì—…
eb7e3e2 - Replace Flutter project with iOS native app
e58f127 - Fix Codemagic Flutter detection issue
```

---

**ğŸŠ í”„ë¡œì íŠ¸ ì™„ë£Œ! iOS ë„¤ì´í‹°ë¸Œ ì•± ê°œë°œ ì„±ê³µ! ğŸŠ**

---

## ğŸ”§ Codemagic ë¹Œë“œ ì„¤ì • ì‘ì—… (ê³„ì†)

### Codemagic í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ

**ì˜¬ë°”ë¥¸ í™˜ê²½ ë³€ìˆ˜ ì´ë¦„:**
```
âœ… APP_STORE_CONNECT_ISSUER_ID = 832d0d84-4c28-4d4d-b5a9-ba6a9064b307
âœ… APP_STORE_CONNECT_KEY_IDENTIFIER = 5AIGE65MGBSI
âœ… APP_STORE_CONNECT_PRIVATE_KEY = -----BEGIN PRIVATE KEY----- ...
```

**ì£¼ì˜ì‚¬í•­:**
- âŒ `APP_STORE_CONNECT_API_KEY` (ì˜ëª»ëœ ì´ë¦„)
- âŒ `APP_STORE_CONNECT_API_KEY_ID` (ì˜ëª»ëœ ì´ë¦„)
- âœ… `APP_STORE_CONNECT_PRIVATE_KEY` (ì˜¬ë°”ë¥¸ ì´ë¦„)
- âœ… `APP_STORE_CONNECT_KEY_IDENTIFIER` (ì˜¬ë°”ë¥¸ ì´ë¦„)

### codemagic.yaml ìˆ˜ì • ì´ë ¥

**ì»¤ë°‹:**
```
bd15467 - Fix: Remove app_store_connect integration
6923990 - Fix: Remove non-existent test targets from Podfile
81dd65e - Fix: Remove variable group
e30a185 - Fix: Link Sefra variable group to workflows
fa91445 - Fix: Re-add Sefra variable group to workflows
```

### Apple Developer Portal ì„¤ì •

**Bundle ID:**
- âœ… sefra.kr ë“±ë¡ë¨
- âœ… Push Notifications í™œì„±í™”
- âœ… Associated Domains í™œì„±í™”

**Certificates:**
- âœ… Development ì¸ì¦ì„œ: Created via API (2026/11/07)
- âš ï¸ Distribution ì¸ì¦ì„œ: ìˆ˜ë™ ìƒì„± í•„ìš”

**ìƒì„±ëœ Distribution ì¸ì¦ì„œ:**
- íŒŒì¼: `C:\Users\PC\Downloads\sefra2.p12`
- Password: `Wx26kUAG`
- âš ï¸ Codemagicì— ìˆ˜ë™ ì—…ë¡œë“œ í•„ìš”

### ë¹Œë“œ ì‹¤íŒ¨ ì´ë ¥ ë° í•´ê²°

**ì˜¤ë¥˜ 1: `Missing value ISSUER_ID`**
- ì›ì¸: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì•ˆ ë¨
- í•´ê²°: Variable group "Sefra" ìƒì„± ë° ì—°ê²°

**ì˜¤ë¥˜ 2: `Missing value KEY_IDENTIFIER`**
- ì›ì¸: ì˜ëª»ëœ ë³€ìˆ˜ ì´ë¦„ (`API_KEY_ID` ëŒ€ì‹  `KEY_IDENTIFIER`)
- í•´ê²°: ë³€ìˆ˜ ì´ë¦„ ìˆ˜ì •

**ì˜¤ë¥˜ 3: `Missing value PRIVATE_KEY`**
- ì›ì¸: ì˜ëª»ëœ ë³€ìˆ˜ ì´ë¦„ (`API_KEY` ëŒ€ì‹  `PRIVATE_KEY`)
- í•´ê²°: ë³€ìˆ˜ ì´ë¦„ ìˆ˜ì •

**ì˜¤ë¥˜ 4: `Cannot save Signing Certificates without certificate private key`**
- ì›ì¸: ì˜¤ë˜ëœ ì¸ì¦ì„œê°€ Apple Portalê³¼ Codemagicì— ë‚¨ì•„ìˆìŒ
- í•´ê²°: ëª¨ë“  ì¸ì¦ì„œ ë° í”„ë¡œí•„ ì‚­ì œ

**ì˜¤ë¥˜ 5: `No matching profiles found for bundle identifier "sefra.kr"`**
- ì›ì¸: Distribution ì¸ì¦ì„œê°€ ìë™ ìƒì„±ë˜ì§€ ì•ŠìŒ
- ìƒíƒœ: sefra2.p12 íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ, ìˆ˜ë™ ì—…ë¡œë“œ ëŒ€ê¸° ì¤‘

### ë‹¤ìŒ ë‹¨ê³„

1. **sefra2.p12 ì¸ì¦ì„œë¥¼ Codemagicì— ì—…ë¡œë“œ**
   - Settings â†’ Code signing identities â†’ Upload certificate
   - íŒŒì¼: `C:\Users\PC\Downloads\sefra2.p12`
   - Password: `Wx26kUAG`

2. **ë¹Œë“œ ì¬ì‹œì‘**
   - ì¸ì¦ì„œ ì—…ë¡œë“œ í›„ ìë™ìœ¼ë¡œ Provisioning Profile ìƒì„±ë¨
   - IPA ë¹Œë“œ ë° TestFlight ì—…ë¡œë“œ

3. **App Store ì œì¶œ ì¤€ë¹„**
   - ì•± ì•„ì´ì½˜ ì¶”ê°€ (1024x1024 PNG)
   - ìŠ¤í¬ë¦°ìƒ· ì¤€ë¹„
   - ì•± ì„¤ëª… ì‘ì„±

---

## ğŸ”§ ì¶”ê°€ ì‘ì—… (2025ë…„ 11ì›” 7ì¼ ì˜¤í›„)

### ìµœê³ ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ì¬ì„¤ì • ì‹œì‘

#### Apple Developer Portal ì„¤ì • í™•ì¸
```
âœ… Bundle ID: sefra.kr (ì´ë¯¸ ë“±ë¡ë¨)
   - Team ID: 348TZ6J486
   - Push Notifications: í™œì„±í™”ë¨
   - Associated Domains: í™œì„±í™”ë¨

âœ… App Store Connect API í‚¤
   - í‚¤ ID: U69P2JJX7K
   - ë°œê¸‰ì ID: 832d0d84-4c28-4d4d-b5a9-ba6a9064b307
   - ì•¡ì„¸ìŠ¤: ê´€ë¦¬ì (Admin)
   - íŒŒì¼: AuthKey_U69P2JJX7K.p8

âœ… APNs ì¸ì¦ í‚¤ ìƒì„±
   - í‚¤ ID: 59T836N4NB
   - í™˜ê²½: Production
   - íŒŒì¼: AuthKey_59T836N4NB.p8
```

#### Firebase ì„¤ì • ì™„ë£Œ
```
âœ… Firebase iOS ì•± ë“±ë¡
   - Bundle ID: sefra.kr
   - App Store ID: 6754912654
   
âœ… GoogleService-Info.plist ì—…ë°ì´íŠ¸
   - ìƒˆ Firebase ì„¤ì •ìœ¼ë¡œ êµì²´
   - GitHub ì»¤ë°‹: c820eb2

âœ… Firebase Console APNs í‚¤ ì—…ë¡œë“œ
   - í”„ë¡œë•ì…˜ APNs ì¸ì¦ í‚¤ ì—…ë¡œë“œ ì™„ë£Œ
   - í‚¤ ID: 59T836N4NB
   - íŒ€ ID: 348TZ6J486
```

#### Codemagic í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```
âœ… APP_STORE_CONNECT_ISSUER_ID
   Value: 832d0d84-4c28-4d4d-b5a9-ba6a9064b307

âœ… APP_STORE_CONNECT_KEY_IDENTIFIER
   Value: U69P2JJX7K

âœ… APP_STORE_CONNECT_PRIVATE_KEY
   Value: -----BEGIN PRIVATE KEY----- ... -----END PRIVATE KEY-----

âœ… GOOGLE_SERVICE_INFO_PLIST
   (Firebase ì„¤ì •)
```

#### Codemagic ì¸ì¦ì„œ ì—…ë¡œë“œ
```
âœ… Development ì¸ì¦ì„œ ì—…ë¡œë“œ
   - íŒŒì¼: sefra2.p12
   - Password: Wx26kUAG
   - Type: development
   - Expires: November 07, 2026

âŒ Distribution ì¸ì¦ì„œ
   - Apple Developer Portalì— ì—†ìŒ
   - ìë™ ìƒì„± ì‹¤íŒ¨
```

### ë¹Œë“œ ì‹œë„ ë° ë¬¸ì œì 

#### ë¹Œë“œ ì‹¤í–‰ ë‚´ì—­
```
Build #1 (690defdb440695a707de9d7c): ios-release
â†’ ìƒíƒœ: failed
â†’ ì˜¤ë¥˜: No matching profiles found for bundle identifier "sefra.kr" 
        and distribution type "app_store"

Build #2 (690df344be0543ee3f18643e): ios-release
â†’ ìƒíƒœ: failed
â†’ ì˜¤ë¥˜: ë™ì¼

Build #3 (690df371be0543ee3f18645d): ios-debug
â†’ ìƒíƒœ: failed
â†’ ì˜¤ë¥˜: No matching profiles found for bundle identifier "sefra.kr" 
        and distribution type "development"
```

#### ë¬¸ì œ ì›ì¸ ë¶„ì„
```
âŒ Distribution ì¸ì¦ì„œ ì—†ìŒ
   - Apple Developer Portalì— "Apple Distribution" ì¸ì¦ì„œ ì—†ìŒ
   - Codemagic ìë™ ìƒì„± ì‹¤íŒ¨ (API ê¶Œí•œ ë¬¸ì œ)

âŒ Provisioning Profile ì—†ìŒ
   - ì¸ì¦ì„œê°€ ì—†ì–´ì„œ Profile ìƒì„± ë¶ˆê°€
   - --create ì˜µì…˜ ì‘ë™ ì•ˆ í•¨

âš ï¸ API í‚¤ ê¶Œí•œ ë¬¸ì œ
   - Admin ê¶Œí•œì´ì§€ë§Œ ì¸ì¦ì„œ ìë™ ìƒì„± ì‹¤íŒ¨
   - "Authentication credentials are missing or invalid" ì˜¤ë¥˜
```

### ì™„ë£Œëœ ì‘ì—… ìš”ì•½

```
âœ… Apple Developer Portal
   - Bundle ID í™•ì¸ ë° ì„¤ì • ê²€ì¦
   - APNs í‚¤ ìƒì„±
   - API í‚¤ ê²€ì¦

âœ… Firebase
   - iOS ì•± ë“±ë¡
   - GoogleService-Info.plist ì—…ë°ì´íŠ¸
   - APNs í‚¤ ì—…ë¡œë“œ

âœ… Codemagic
   - í™˜ê²½ ë³€ìˆ˜ 3ê°œ ì„¤ì •
   - Development ì¸ì¦ì„œ ì—…ë¡œë“œ
   - í”„ë¡œì íŠ¸ ì„¤ì • ì™„ë£Œ

âœ… GitHub
   - GoogleService-Info.plist ì»¤ë°‹
   - ëª¨ë“  ì„¤ì • íŒŒì¼ ìµœì‹  ìƒíƒœ
```

### ë‚¨ì€ ì‘ì—…

```
âŒ Distribution ì¸ì¦ì„œ ìƒì„±
   - ì˜µì…˜ 1: API í‚¤ ì¬ìƒì„± í›„ ìë™ ìƒì„± ì¬ì‹œë„
   - ì˜µì…˜ 2: Macì—ì„œ Xcodeë¡œ ìˆ˜ë™ ìƒì„±
   - ì˜µì…˜ 3: Mac ëŒ€ì—¬ ì„œë¹„ìŠ¤ ì´ìš© (MacinCloud, MacStadium)

âŒ Provisioning Profile ìƒì„±
   - Distribution ì¸ì¦ì„œ ìƒì„± í›„ ìë™ ìƒì„± ê°€ëŠ¥

âŒ ë¹Œë“œ ì„±ê³µ ë° TestFlight ì—…ë¡œë“œ
   - ì¸ì¦ì„œ ë¬¸ì œ í•´ê²° í›„ ê°€ëŠ¥
```

### ë‹¤ìŒ ë‹¨ê³„ (ë‚´ì¼)

#### ë°©ë²• 1: API í‚¤ ì¬ìƒì„± (ì¶”ì²œ)
```
1. App Store Connectì—ì„œ ê¸°ì¡´ "sefra" í‚¤ ì‚­ì œ
2. ìƒˆ API í‚¤ ìƒì„± (ì´ë¦„: Sefra Codemagic)
3. ì•¡ì„¸ìŠ¤: Admin
4. Codemagic í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
5. ë¹Œë“œ ì¬ì‹¤í–‰
â†’ ì†Œìš” ì‹œê°„: 30ë¶„
â†’ ì„±ê³µ ê°€ëŠ¥ì„±: 70%
```

#### ë°©ë²• 2: Macì—ì„œ ì¸ì¦ì„œ ìƒì„± (í™•ì‹¤í•¨)
```
1. Mac ë¹Œë¦¬ê¸° (ì£¼ë³€ ë˜ëŠ” ëŒ€ì—¬ ì„œë¹„ìŠ¤)
2. Xcode ì„¤ì¹˜ ë° í”„ë¡œì íŠ¸ ì—´ê¸°
3. Signing & Capabilities â†’ Automatically manage signing
4. Distribution ì¸ì¦ì„œ ìë™ ìƒì„±
5. ì¸ì¦ì„œ Export (.p12)
6. Codemagicì— ì—…ë¡œë“œ
7. ë¹Œë“œ ì‹¤í–‰
â†’ ì†Œìš” ì‹œê°„: 30ë¶„
â†’ ì„±ê³µ ê°€ëŠ¥ì„±: 100%
```

### ì°¸ê³  ì •ë³´

#### ìƒì„±ëœ íŒŒì¼ë“¤
```
C:\Users\PC\Downloads\AuthKey_U69P2JJX7K.p8  (API í‚¤)
C:\Users\PC\Downloads\AuthKey_59T836N4NB.p8  (APNs í‚¤)
C:\Users\PC\Downloads\GoogleService-Info.plist
```

#### GitHub ì»¤ë°‹
```
c820eb2 - Update Firebase GoogleService-Info.plist for iOS app
```

#### Codemagic ë¹Œë“œ URL
```
https://codemagic.io/app/690b3d42e4a2f00b23fff3b7
```

---

**ì‘ì—… ì¼ì**: 2025ë…„ 11ì›” 7ì¼ ì˜¤í›„  
**ìƒíƒœ**: Distribution ì¸ì¦ì„œ ë¬¸ì œë¡œ ëŒ€ê¸° ì¤‘  
**ë‹¤ìŒ ì‘ì—…**: API í‚¤ ì¬ìƒì„± ë˜ëŠ” Macì—ì„œ ì¸ì¦ì„œ ìƒì„±

