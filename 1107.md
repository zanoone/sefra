# 2025ë…„ 11ì›” 7ì¼ - Sefra Flutter í¬ë˜ì‹œ ë””ë²„ê¹… ê³„ì†

**Date**: 2025-11-07
**Previous**: 1106.md
**Status**: ğŸ” Firebaseê°€ ì›ì¸ì´ ì•„ë‹˜ í™•ì¸ë¨

---

## ğŸ“ ì¤‘ìš” ì •ë³´ (ìë™ ê¸°ì–µ)

### Git ì •ë³´
```bash
# ì €ì¥ì†Œ
https://github.com/zanoone/sefra.git

# ë¸Œëœì¹˜
main

# í† í° (í•­ìƒ ì‚¬ìš©)
ghp_[MASKED_TOKEN]

# Push ëª…ë ¹ì–´
git push https://ghp_[MASKED_TOKEN]@github.com/zanoone/sefra.git main
```

### "check" ëª…ë ¹ì–´
```
ì‚¬ìš©ìê°€ "check"ë¥¼ ì…ë ¥í•˜ë©´:
1. http://121.155.14.128/d.txtë¥¼ ìë™ìœ¼ë¡œ ì½ì–´ì˜´
2. ë‚´ìš©ì„ ì´ íŒŒì¼(1107.md)ì— ì—…ë°ì´íŠ¸
3. Git í† í° ì •ë³´ëŠ” í•­ìƒ ìœ„ì˜ ê°’ ì‚¬ìš©
```

---

## ğŸ”¥ ê¸´ê¸‰ ìƒí™©: v1.0.0+22ì—ì„œë„ í¬ë˜ì‹œ ë°œìƒ!

### TestFlight Feedback #2 ê²°ê³¼

**ë²„ì „**: 1.0.0 (22) - Firebase ì™„ì „ ì œê±° ë²„ì „
**ì‹œê°„**: 2025-11-06 23:33:30 (KST)
**ë””ë°”ì´ìŠ¤**: iPhone 13 (iPhone14,7)
**ê²°ê³¼**: âŒ **ì—¬ì „íˆ í¬ë˜ì‹œ ë°œìƒ**

```
Exception Type: EXC_BAD_ACCESS (SIGSEGV)
Exception Subtype: KERN_INVALID_ADDRESS at 0x0000000000000000

Thread 0 Crashed:
0   libswiftCore.dylib     swift_getObjectType + 40
1   Runner                 0x0000000100ae3d2c (offset 1244460)
```

### ğŸ’¡ ê²°ë¡ 

**FirebaseëŠ” í¬ë˜ì‹œ ì›ì¸ì´ ì•„ë‹™ë‹ˆë‹¤!**

Firebaseë¥¼ ì™„ì „íˆ ì œê±°í–ˆëŠ”ë°ë„ ë™ì¼í•œ ìœ„ì¹˜ì—ì„œ í¬ë˜ì‹œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ë²„ì „ íˆìŠ¤í† ë¦¬

| ë²„ì „ | ë³€ê²½ì‚¬í•­ | í¬ë˜ì‹œ ì—¬ë¶€ | ê²°ê³¼ |
|------|---------|-----------|------|
| 1.0.0+18 | ì›ë³¸ (Firebase í¬í•¨) | âŒ í¬ë˜ì‹œ | `swift_getObjectType + 40` |
| 1.0.0+19 | firebase_options.dart ì¶”ê°€ | âŒ í¬ë˜ì‹œ | ë™ì¼ ìœ„ì¹˜ |
| 1.0.0+20 | ë°±ê·¸ë¼ìš´ë“œ í•¸ë“¤ëŸ¬ ì œê±° | âŒ í¬ë˜ì‹œ | ë™ì¼ ìœ„ì¹˜ |
| 1.0.0+21 | ë„¤ì´í‹°ë¸Œ Firebase ì´ˆê¸°í™” | âŒ í¬ë˜ì‹œ | ë™ì¼ ìœ„ì¹˜ |
| **1.0.0+22** | **Firebase ì™„ì „ ì œê±°** | **âŒ í¬ë˜ì‹œ** | **ë™ì¼ ìœ„ì¹˜!** |

**ê³µí†µ íŒ¨í„´**:
- ëª¨ë“  ë²„ì „ì—ì„œ ë™ì¼í•œ ìœ„ì¹˜ í¬ë˜ì‹œ
- `swift_getObjectType`ì—ì„œ null í¬ì¸í„° (0x0000000000000000) ì ‘ê·¼
- UIApplication ë¸ë¦¬ê²Œì´íŠ¸ ì´ˆê¸°í™” ì¤‘ ë°œìƒ
- Release ë¹Œë“œì—ì„œë§Œ ë°œìƒ (Debug/SimulatorëŠ” ì •ìƒ)

---

## ğŸ¯ ë‹¤ìŒ ì¡°ì‚¬ ëŒ€ìƒ: ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸

### í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í”ŒëŸ¬ê·¸ì¸

```yaml
dependencies:
  flutter_inappwebview: 6.0.0      # WebView (ë³µì¡í•œ ë„¤ì´í‹°ë¸Œ ë¸Œë¦¿ì§€)
  local_auth: ^2.1.0               # ìƒì²´ì¸ì¦ (Face ID/Touch ID)
  device_info_plus: ^9.1.0         # ë””ë°”ì´ìŠ¤ ì •ë³´
  shared_preferences: ^2.2.0       # ë¡œì»¬ ì €ì¥ì†Œ
```

### ì˜ì‹¬ ìˆœìœ„

1. ğŸ”´ **flutter_inappwebview** (ìµœìš°ì„  ì˜ì‹¬)
   - ê°€ì¥ ë³µì¡í•œ í”ŒëŸ¬ê·¸ì¸
   - ë§ì€ ë„¤ì´í‹°ë¸Œ ì½”ë“œì™€ Swift ë¸Œë¦¿ì§€
   - Release ë¹Œë“œì—ì„œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥ì„± ë†’ìŒ
   - ë²„ì „ 6.0.0ìœ¼ë¡œ ê³ ì • (ì´ì „ì— 6.1.5ì—ì„œ ë‹¤ìš´ê·¸ë ˆì´ë“œ)

2. ğŸŸ¡ **local_auth** (ì¤‘ê°„ ì˜ì‹¬)
   - iOS ë„¤ì´í‹°ë¸Œ API ì‚¬ìš© (ìƒì²´ì¸ì¦)
   - ê¶Œí•œ ë° ì„¤ì • ê´€ë ¨ ì´ìŠˆ ê°€ëŠ¥
   - Release ë¹Œë“œì—ì„œ ì´ˆê¸°í™” ë¬¸ì œ ê°€ëŠ¥ì„±

3. ğŸŸ¢ **device_info_plus** (ë‚®ìŒ)
   - ë¹„êµì  ë‹¨ìˆœí•œ í”ŒëŸ¬ê·¸ì¸
   - ë””ë°”ì´ìŠ¤ ID ì¡°íšŒë§Œ ìˆ˜í–‰

4. ğŸŸ¢ **shared_preferences** (ë§¤ìš° ë‚®ìŒ)
   - ë§¤ìš° ë‹¨ìˆœí•˜ê³  ì•ˆì •ì 
   - í¬ë˜ì‹œ ê°€ëŠ¥ì„± ê±°ì˜ ì—†ìŒ

---

## ğŸ”¬ ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì „ëµ

### ì˜µì…˜ 1: flutter_inappwebview ì œê±° (ì¶”ì²œ)

**ì´ìœ **:
- ê°€ì¥ ë³µì¡í•œ í”ŒëŸ¬ê·¸ì¸
- ë„¤ì´í‹°ë¸Œ ë¸Œë¦¿ì§€ ë§ìŒ
- Release/Debug ì°¨ì´ì— ë¯¼ê°

**ë³€ê²½ì‚¬í•­**:
```yaml
# pubspec.yaml
# flutter_inappwebview: 6.0.0  # DISABLED FOR TESTING
```

**lib/main.dart**:
- InAppWebViewë¥¼ ì¼ë°˜ Containerë‚˜ Textë¡œ ëŒ€ì²´
- WebView ì—†ì´ ê¸°ë³¸ í™”ë©´ë§Œ í‘œì‹œ

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… í¬ë˜ì‹œ ì—†ìŒ â†’ flutter_inappwebviewê°€ ì›ì¸
- âŒ ì—¬ì „íˆ í¬ë˜ì‹œ â†’ ë‹¤ë¥¸ í”ŒëŸ¬ê·¸ì¸ ì¡°ì‚¬

### ì˜µì…˜ 2: ëª¨ë“  í”ŒëŸ¬ê·¸ì¸ ì œê±°

**ë³€ê²½ì‚¬í•­**:
- ëª¨ë“  í”ŒëŸ¬ê·¸ì¸ ì£¼ì„ ì²˜ë¦¬
- ê¸°ë³¸ "Hello World" ì•±ë§Œ ì‹¤í–‰

**ëª©ì **:
- í”ŒëŸ¬ê·¸ì¸ vs ì•± êµ¬ì¡° ë¬¸ì œ êµ¬ë¶„

### ì˜µì…˜ 3: local_auth ì œê±°

**ë³€ê²½ì‚¬í•­**:
- local_auth ì œê±°
- ìƒì²´ì¸ì¦ ê¸°ëŠ¥ ë¹„í™œì„±í™”

**ëª©ì **:
- ê¶Œí•œ/ìƒì²´ì¸ì¦ì´ ë¬¸ì œì¸ì§€ í™•ì¸

---

## ğŸ¤” ì¶”ê°€ ì¡°ì‚¬ ë°©í–¥

### 1. Release ë¹Œë“œ ì„¤ì • í™•ì¸

**Xcode Build Settings**:
```
Optimization Level (Release): -Os
Dead Code Stripping: YES
Strip Debug Symbols: YES
```

Release ë¹Œë“œê°€ Debugì™€ ë‹¤ë¥¸ ìµœì í™”ë¥¼ í•˜ê¸° ë•Œë¬¸ì— ë¬¸ì œ ë°œìƒ ê°€ëŠ¥.

### 2. Swift Concurrency ì„¤ì •

**ios/Podfile**:
```ruby
config.build_settings['SWIFT_STRICT_CONCURRENCY'] = 'minimal'
```

ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆì§€ë§Œ, 'complete'ë¡œ ë³€ê²½í•´ë³¼ ìˆ˜ ìˆìŒ.

### 3. ë©”ëª¨ë¦¬ ê´€ë¦¬

**ê°€ëŠ¥ì„±**:
- Release ë¹Œë“œì—ì„œ ARCê°€ ê°ì²´ë¥¼ ë„ˆë¬´ ë¹¨ë¦¬ í•´ì œ
- ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ì ‘ê·¼
- Weak/Strong reference ë¬¸ì œ

---

## ğŸ“‹ ë‹¤ìŒ ì‘ì—… (v1.0.0+23)

### ì¶”ì²œ: flutter_inappwebview ì œê±° í…ŒìŠ¤íŠ¸

**ì‘ì—… ìˆœì„œ**:
1. âœ… pubspec.yamlì—ì„œ flutter_inappwebview ì£¼ì„ ì²˜ë¦¬
2. âœ… lib/main.dartì—ì„œ InAppWebView ì œê±°, ê¸°ë³¸ UIë¡œ ëŒ€ì²´
3. âœ… ë²„ì „ 1.0.0+23ìœ¼ë¡œ ì—…ë°ì´íŠ¸
4. âœ… flutter clean && flutter pub get
5. âœ… Pod ì¬ì„¤ì¹˜
6. âœ… iOS Release ë¹Œë“œ
7. âœ… Git ì»¤ë°‹ & í‘¸ì‹œ
8. â³ Codemagic ë¹Œë“œ & TestFlight ë°°í¬
9. â³ ì‹¤ì œ ê¸°ê¸° í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ì‹œê°„**: 30-40ë¶„

---

## ğŸ“ ê´€ë ¨ íŒŒì¼

- `1106.md` - ì–´ì œ ì „ì²´ ì‘ì—… ê¸°ë¡ (933ì¤„)
- `CRASH_DEBUG.md` - í¬ë˜ì‹œ ë¶„ì„ ë¬¸ì„œ
- TestFlight í”¼ë“œë°±:
  - `testflight_feedback.zip` - v1.0.0+21
  - `testflight_feedback-2.zip` - v1.0.0+22

---

## ğŸ”„ ì—…ë°ì´íŠ¸ ë¡œê·¸

### 2025-11-07 (ìµœì‹ ) - ğŸ”¥ í•µì‹¬ ë¬¸ì œ ë°œê²¬! ë¡œì»¬ vs Codemagic ì°¨ì´

**ì„œë²„ ì²´í¬ (check ëª…ë ¹ì–´)**:
```
sefra.kr ì€ ë²ˆë“¤ ì•„ì´ë””ê³ 
ì €ê±° ì™œ íŒ…ê¸°ëƒê³  ì‹œë°œë ¨ì•„
ë¡œì»¬ë¡œ ë¹Œë“œí•˜ë©´ ì‹œë®¬ë ˆì´í„° ì˜ëŒì•„ê°€ëŠ”ë°
codemagicë§ŒëŒì•„ê°€ë©´ ì‹¤ì œ iosì—ì„œ ì—ëŸ¬ë‚œë‹¤ê³ 
```

### ğŸ¯ í•µì‹¬ ë°œê²¬

**âœ… ë¡œì»¬ ë¹Œë“œ + ì‹œë®¬ë ˆì´í„°**: ì •ìƒ ì‘ë™
**âŒ Codemagic ë¹Œë“œ + ì‹¤ì œ iOS ë””ë°”ì´ìŠ¤**: í¬ë˜ì‹œ ë°œìƒ

**ì´ê²ƒì€ ë¹Œë“œ í™˜ê²½ ì°¨ì´ ë¬¸ì œì…ë‹ˆë‹¤!**

### ğŸ” ê°€ëŠ¥í•œ ì›ì¸

1. **Optimization Level ì°¨ì´**
   - Codemagicì´ ë” ê³µê²©ì ì¸ ìµœì í™” ì‚¬ìš© ê°€ëŠ¥
   - Release ë¹Œë“œì˜ Swift ìµœì í™” ì„¤ì • ì°¨ì´

2. **Flutter/Xcode ë²„ì „ ì°¨ì´**
   - ë¡œì»¬: (í™•ì¸ í•„ìš”)
   - Codemagic: Xcode `latest`, Flutter `stable`, M1 mac_mini

3. **ë¹Œë“œ í”Œë˜ê·¸ ì°¨ì´**
   - Codemagicì˜ `codemagic.yaml` ì„¤ì •
   - ì¶”ê°€ ë¹Œë“œ ì˜µì…˜ì´ ë¬¸ì œ ìœ ë°œ ê°€ëŠ¥

4. **ì½”ë“œ ì„œëª… ê´€ë ¨**
   - ì‹¤ì œ ë””ë°”ì´ìŠ¤ ë°°í¬ ì‹œì—ë§Œ ë°œìƒ
   - ì‹œë®¬ë ˆì´í„°ì™€ ë‹¤ë¥¸ ë°”ì´ë„ˆë¦¬ ìƒì„±

5. **ì•„í‚¤í…ì²˜ ì°¨ì´**
   - ì‹œë®¬ë ˆì´í„°: x86_64
   - ì‹¤ì œ ë””ë°”ì´ìŠ¤: arm64
   - arm64ì—ì„œë§Œ ë°œìƒí•˜ëŠ” ë©”ëª¨ë¦¬ ì •ë ¬ ë¬¸ì œ ê°€ëŠ¥

### ğŸš¨ Codemagic.yaml ë¶„ì„ ê²°ê³¼

**ì¤‘ìš” ë°œê²¬: ë¹Œë“œ ëª…ë ¹ì´ ì—†ìŠµë‹ˆë‹¤!**

```yaml
scripts:
  - flutter clean
  - flutter packages pub get
  - flutter analyze  â† ë¶„ì„ë§Œ í•˜ê³  ë¹Œë“œ ì•ˆ í•¨!

artifacts:
  - build/ios/iphoneos/*.app  â† ë¹Œë“œ ì•ˆ í–ˆëŠ”ë° ê²°ê³¼ë§Œ ì°¾ìœ¼ë ¤ í•¨
```

**Codemagic í™˜ê²½:**
- Instance: `mac_mini_m1` (Apple Silicon)
- Xcode: `latest` (ìë™ ì—…ë°ì´íŠ¸)
- Flutter: `stable`
- ìë™ ì½”ë“œ ì„œëª… ë° TestFlight ì œì¶œ

**í•´ê²°: ëª…ì‹œì  ë¹Œë“œ ëª…ë ¹ ì¶”ê°€ ì™„ë£Œ âœ…**

### âœ… v1.0.0+24 ë°°í¬ ì¤€ë¹„ ì¤‘ (Xcode ì§ì ‘ ë¹Œë“œ)

**ì„œë²„ ì²´í¬ (check ëª…ë ¹ì–´)**:
```
ê·¼ë° ê¼­ flutterë¡œ ë¹Œë“œí•´ì„œ ì—…ë¡œë“œí•´ì•¼í•´? codemagic ì—°ë™ì´ê¸´í•œë°
ios ë¡œì»¬ë¡œ ì§€ê¸ˆ xcodeë¡œëŠ” ë¹Œë“œê°€ ë˜ëŠ”ë° codemagicì—ì„œ ë¹Œë“œí•˜ê³ ë‚˜ì„œ ì‹¤ì œ iosì—ì„œ ì‹¤í–‰í•˜ë©´
ì¶©ëŒëœ¨ì–ì•„ ios ì‹œë®¬ë ˆì´í„°ëŠ” ì˜ ì‘ë™ë˜ëŠ”ë° ã…‡ã…‡..
```

**ë‹µë³€: Flutter ëŒ€ì‹  Xcode ì§ì ‘ ë¹Œë“œë¡œ ë³€ê²½!**

**v1.0.0+24 ë³€ê²½ì‚¬í•­**:
```yaml
# codemagic.yaml - Xcode ì§ì ‘ ë¹Œë“œ
- name: Build iOS release with Xcode (skip Flutter build)
  script: |
    cd ios
    xcodebuild archive \
      -workspace Runner.xcworkspace \
      -scheme Runner \
      -configuration Release \
      -archivePath $CM_BUILD_DIR/build/ios/Runner.xcarchive

    xcodebuild -exportArchive \
      -archivePath $CM_BUILD_DIR/build/ios/Runner.xcarchive \
      -exportPath $CM_BUILD_DIR/build/ios/ipa \
      -exportOptionsPlist $CM_BUILD_DIR/ios/exportOptions.plist
```

**ì¶”ê°€í•œ íŒŒì¼**:
- `ios/exportOptions.plist` (App Store ë°°í¬ìš©)

**ì „ëµ ë³€ê²½**:
- âŒ `flutter build ipa` (Flutterê°€ ìµœì í™”í•˜ë©´ì„œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥)
- âœ… `xcodebuild` ì§ì ‘ ì‚¬ìš© (ë¡œì»¬ Xcodeì™€ ë™ì¼í•œ ë°©ì‹)

### âœ… v1.0.0+23 ë°°í¬ ì™„ë£Œ (Flutter build - ì‹¤íŒ¨ ê°€ëŠ¥ì„±)

**ë³€ê²½ì‚¬í•­**:
```yaml
# codemagic.yaml
- name: Build iOS release
  script: |
    flutter build ipa --release

artifacts:
  - build/ios/ipa/*.ipa  # .app â†’ .ipaë¡œ ë³€ê²½
```

**Git ì»¤ë°‹ & í‘¸ì‹œ**:
- âœ… ì»¤ë°‹: 0e35c89
- âœ… GitHub í‘¸ì‹œ ì™„ë£Œ
- âœ… Codemagicê°€ ìë™ìœ¼ë¡œ ë¹Œë“œ ì‹œì‘í•  ê²ƒ

**ë‹¤ìŒ ë‹¨ê³„**:
1. â³ Codemagic ë¹Œë“œ ëŒ€ê¸° (ìë™ íŠ¸ë¦¬ê±°)
2. â³ TestFlight ìë™ ì—…ë¡œë“œ
3. â³ ì‹¤ì œ ë””ë°”ì´ìŠ¤ì—ì„œ v1.0.0+23 í…ŒìŠ¤íŠ¸

### 2025-11-07 (ì´ì „) - Firebase Swift ì»´íŒŒì¼ ì—ëŸ¬ ë°œê²¬

**ì„œë²„ ì²´í¬ (check ëª…ë ¹ì–´)**:
- ì§ˆë¬¸: "ìš°ì„  ì§€ê¸ˆ ë§ˆì§€ë§‰ ì—ëŸ¬ê°€ ë­ì—¿ì§€?"

**ë§ˆì§€ë§‰ ì—ëŸ¬ ìƒí™©**:

âœ… **iOS Release ë¹Œë“œ ì„±ê³µ** (b3072c):
```
âœ“ Built build/ios/iphoneos/Runner.app (16.0MB)
ì™„ë£Œ ì‹œê°„: 169.7ì´ˆ
```

âŒ **Debug ë¹Œë“œë“¤ ì‹¤íŒ¨** - Firebase Swift ì»´íŒŒì¼ ì—ëŸ¬:
```
FirebaseCoreInternal/FIRAllocatedUnfairLock.swift:26:37
error: cannot find type 'sending' in scope
public init(initialState: sending State)

HeartbeatsPayload.swift:20:3
error: Access level on imports require '-enable-experimental-feature AccessLevelOnImport'
internal import GoogleUtilities
```

**ì›ì¸ ë¶„ì„**:
- `sending` í‚¤ì›Œë“œëŠ” Swift 6.0 ë™ì‹œì„± ê¸°ëŠ¥
- í˜„ì¬ Xcode/Swift ë²„ì „ì´ ì§€ì›í•˜ì§€ ì•ŠìŒ
- FirebaseCoreInternalì´ ìµœì‹  Swift ë¬¸ë²• ì‚¬ìš©
- Release ë¹Œë“œëŠ” ì„±ê³µí–ˆì§€ë§Œ Debug ë¹Œë“œëŠ” ì‹¤íŒ¨

**ì˜í–¥ë°›ëŠ” ë¹Œë“œ**:
- macOS Flutter run âŒ
- iOS Debug build âŒ
- Xcode simulator build âŒ
- iOS Release build âœ… (ì„±ê³µ!)

### 2025-11-07 (ì´ì „)
- ì„œë²„ ì—…ë°ì´íŠ¸ í™•ì¸ (http://121.155.14.128/d.txt)
- ë©”ì‹œì§€: "ìš°ì„  1107.mdì— ì €ì¥í•˜ê³  check ë¶€ë¶„ ê¸°ì–µí•˜ê³  git ì•„ì´ë”” í† í° ê¸°ì–µê¼­ í•´"
- âœ… check ëª…ë ¹ì–´ ê¸°ëŠ¥ í™•ì¸
- âœ… Git í† í° ì •ë³´ í™•ì¸

### 2025-11-07 00:00 (ìƒˆë²½)
- v1.0.0+22 TestFlight í…ŒìŠ¤íŠ¸ ê²°ê³¼ í™•ì¸
- Firebaseê°€ ì›ì¸ì´ ì•„ë‹˜ í™•ì¸
- ë‹¤ìŒ ì¡°ì‚¬ ëŒ€ìƒ: flutter_inappwebview
- 1107.md ë¬¸ì„œ ìƒì„±

---

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 7ì¼
**ì‘ì„±ì**: Claude Code
**í”„ë¡œì íŠ¸**: Sefra Flutter iOS App
