# 2025-11-09 iOS ì•± ì „í™˜ ì‘ì—… ê¸°ë¡

## ğŸ“Œ í”„ë¡œì íŠ¸ ì •ë³´

### ê¸°ë³¸ ì •ë³´
- **í”„ë¡œì íŠ¸ëª…**: Sefra iOS
- **ìœ„ì¹˜**: `/Users/admin/SefraiOS/`
- **ë²ˆë“¤ ID**: `sefra.kr`
- **ì–¸ì–´**: Swift 5.0 + UIKit
- **ìµœì†Œ iOS**: 14.0

### GitHub ì €ì¥ì†Œ
```
ì €ì¥ì†Œ: https://github.com/zanoone/sefra.git
ë¸Œëœì¹˜: ios-app
í† í°: [GitHub Personal Access Token - ë³„ë„ ë³´ê´€]
```

### Firebase ì„¤ì •
```
PROJECT_ID: sefra-5f70b
BUNDLE_ID: sefra.kr
GCM_SENDER_ID: 490906882581
GOOGLE_APP_ID: 1:490906882581:ios:5e804c974a27906166741c
```

### Apple Developer
```
ë²ˆë“¤ ID: sefra.kr
Key ID: U69P2JJX7K
Issuer ID: 832d0d84-4c28-4a4d-b5a9-ba6a9064b307
.p8 íŒŒì¼: AuthKey_U69P2JJX7K.p8
```

**Private Key:**
```
íŒŒì¼: /Users/admin/AuthKey_U69P2JJX7K.p8
ë‹¤ìš´ë¡œë“œ: http://121.155.14.128/AuthKey_U69P2JJX7K.p8
ë˜ëŠ” ë¡œì»¬ì— ë³„ë„ ë³´ê´€
```

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. iOS ë„¤ì´í‹°ë¸Œ ì•± ê°œë°œ (100% ì™„ë£Œ)
- [x] Swift + UIKit êµ¬í˜„ (Flutter ì—†ìŒ)
- [x] WKWebViewë¡œ sefra.kr ë¡œë“œ
- [x] Face ID / Touch ID ìƒì²´ì¸ì¦ êµ¬í˜„
- [x] Firebase Cloud Messaging (í‘¸ì‹œ ì•Œë¦¼) í†µí•©
- [x] JavaScript Bridge (ì›¹â†”ë„¤ì´í‹°ë¸Œ í†µì‹ )
- [x] AppDelegate.swift ì‘ì„±
- [x] ViewController.swift ì‘ì„±
- [x] Info.plist ê¶Œí•œ ì„¤ì •

### 2. í”„ë¡œì íŠ¸ ì„¤ì •
- [x] ë²ˆë“¤ IDë¥¼ `sefra.kr`ë¡œ ë³€ê²½
- [x] GoogleService-Info.plist ë‹¤ìš´ë¡œë“œ ë° ì„¤ì •
- [x] Firebase 10.29.0 ì„¤ì¹˜ (ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°)
- [x] CocoaPods ì˜ì¡´ì„± ì„¤ì¹˜ ì™„ë£Œ
- [x] Xcode ë¹Œë“œ ì„±ê³µ (**BUILD SUCCEEDED**)

### 3. Git ì €ì¥ì†Œ ì„¤ì •
- [x] Git ì €ì¥ì†Œ ì´ˆê¸°í™”
- [x] GitHub remote ì¶”ê°€
- [x] `ios-app` ë¸Œëœì¹˜ ìƒì„±
- [x] ì½”ë“œ ì»¤ë°‹ ë° push ì™„ë£Œ
- [x] GitHub: https://github.com/zanoone/sefra/tree/ios-app

### 4. Codemagic ì„¤ì •
- [x] `codemagic.yaml` íŒŒì¼ ìƒì„±
- [x] ë¹Œë“œ íŠ¸ë¦¬ê±° ì„¤ì • (`ios-app` ë¸Œëœì¹˜)
- [x] TestFlight ìë™ ì—…ë¡œë“œ ì„¤ì •
- [x] í™˜ê²½ ë³€ìˆ˜ ë¬¸ì„œ ì‘ì„±

### 5. ë¬¸ì„œ ì‘ì„±
- [x] README.md (í”„ë¡œì íŠ¸ ê°œìš”)
- [x] QUICK_START.md (5ë¶„ ë¹ ë¥¸ ì‹œì‘)
- [x] SETUP_GUIDE.md (ìƒì„¸ ì„¤ì •)
- [x] CODEMAGIC_SETUP.md (Codemagic ê°€ì´ë“œ)
- [x] CODEMAGIC_ENV_VARIABLES.md (í™˜ê²½ ë³€ìˆ˜)
- [x] APPLE_DEVELOPER_SETUP.md (Apple Developer)
- [x] CODEMAGIC_AUTH_FIX.md (ì¸ì¦ ì˜¤ë¥˜ í•´ê²°)
- [x] SefraiOS_COMPLETE_SETUP_GUIDE.md (ì™„ì „ ê°€ì´ë“œ)

---

## âš ï¸ í•´ê²°ë˜ì§€ ì•Šì€ ë¬¸ì œ

### 1. Codemagic ì¸ì¦ ì˜¤ë¥˜

**ì˜¤ë¥˜ ë©”ì‹œì§€:**
```
Authentication credentials are missing or invalid.
Provide a properly configured and signed bearer token.
```

**ì›ì¸:**
- App Store Connect API Keyì˜ Private Key í˜•ì‹ ë¬¸ì œ
- Codemagicì—ì„œ ì¤„ë°”ê¿ˆì„ ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ëª»í•¨

**í•´ê²° ë°©ë²• (2ê°€ì§€ ì¤‘ ì„ íƒ):**

#### ë°©ë²• A: Private Key ì¬ì…ë ¥ (ì •í™•í•œ í˜•ì‹)

Codemagic â†’ Settings â†’ Environment variables

**APP_STORE_CONNECT_PRIVATE_KEY** ì‚­ì œ í›„ ì¬ì¶”ê°€:
- Type: Text
- Secure: âœ“
- Value: AuthKey_U69P2JJX7K.p8 íŒŒì¼ì˜ ì „ì²´ ë‚´ìš© ë³µì‚¬
- íŒŒì¼ ìœ„ì¹˜: /Users/admin/AuthKey_U69P2JJX7K.p8
- ë˜ëŠ” ë‹¤ìš´ë¡œë“œ: http://121.155.14.128/AuthKey_U69P2JJX7K.p8

**ì¤‘ìš”**: ë°˜ë“œì‹œ 6ì¤„ë¡œ ì…ë ¥, ì¤„ë°”ê¿ˆ í¬í•¨ (-----BEGIN PRIVATE KEY----- ë¶€í„° -----END PRIVATE KEY----- ê¹Œì§€)

#### ë°©ë²• B: Automatic Code Signing ì‚¬ìš© (ê¶Œì¥)

Codemagic â†’ Settings â†’ Code signing identities
1. **Enable automatic code signing** ì²´í¬
2. Apple ID ì…ë ¥
3. App-specific password ìƒì„±:
   - https://appleid.apple.com/
   - Sign-in and Security â†’ App-specific passwords
   - Generate password... í´ë¦­
   - ìƒì„±ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ Codemagicì— ì…ë ¥

**ì¥ì **: í™˜ê²½ ë³€ìˆ˜ 3ê°œ ë¶ˆí•„ìš”, ì„¤ì • ê°„ë‹¨

---

## ğŸš€ ë‹¤ìŒì— í•´ì•¼ í•  ì‘ì—…

### 1ë‹¨ê³„: Codemagic ì¸ì¦ ë¬¸ì œ í•´ê²°
- [ ] ë°©ë²• A ë˜ëŠ” ë°©ë²• B ì„ íƒí•˜ì—¬ ì„¤ì •
- [ ] ë¹Œë“œ ì¬ì‹œì‘

### 2ë‹¨ê³„: Codemagic í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ë°©ë²• A ì„ íƒ ì‹œ)

**Settings â†’ Environment variables** 3ê°œ ì¶”ê°€:

```
1. APP_STORE_CONNECT_ISSUER_ID
   = 832d0d84-4c28-4a4d-b5a9-ba6a9064b307

2. APP_STORE_CONNECT_KEY_IDENTIFIER
   = U69P2JJX7K

3. APP_STORE_CONNECT_PRIVATE_KEY
   = AuthKey_U69P2JJX7K.p8 íŒŒì¼ ë‚´ìš© (ì¤„ë°”ê¿ˆ í¬í•¨)
```

### 3ë‹¨ê³„: ì²« ë¹Œë“œ ì‹¤í–‰
- [ ] Codemagic â†’ Start new build
- [ ] Branch: ios-app
- [ ] Workflow: ios-sefra-workflow
- [ ] ë¹Œë“œ ì™„ë£Œ ëŒ€ê¸° (10-15ë¶„)

### 4ë‹¨ê³„: TestFlight í™•ì¸
- [ ] App Store Connect ë¡œê·¸ì¸
- [ ] TestFlight íƒ­ì—ì„œ ë¹Œë“œ í™•ì¸
- [ ] ë‚´ë¶€ í…ŒìŠ¤í„° ì¶”ê°€
- [ ] ë² íƒ€ í…ŒìŠ¤íŠ¸

### 5ë‹¨ê³„: App Store ì œì¶œ (ì„ íƒ)
- [ ] ìŠ¤í¬ë¦°ìƒ· ì¤€ë¹„ (6.7", 6.5")
- [ ] ì•± ì„¤ëª… ì‘ì„±
- [ ] Submit for Review

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### ê°œë°œ í™˜ê²½
- Xcode 15.0
- Swift 5.0
- CocoaPods 1.16.2
- iOS 14.0+

### ì˜ì¡´ì„±
```
Firebase/Core: 10.29.0
Firebase/Messaging: 10.29.0
Firebase/Analytics: 10.29.0
```

### ë¹Œë“œ ë„êµ¬
- Xcode Build System
- CocoaPods
- Codemagic CI/CD

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
SefraiOS/
â”œâ”€â”€ SefraiOS/
â”‚   â”œâ”€â”€ AppDelegate.swift              # FCM, ì•± ìƒëª…ì£¼ê¸°
â”‚   â”œâ”€â”€ ViewController.swift           # WebView, ìƒì²´ì¸ì¦, JS Bridge
â”‚   â”œâ”€â”€ Info.plist                     # ì•± ì„¤ì •, ê¶Œí•œ
â”‚   â”œâ”€â”€ GoogleService-Info.plist       # Firebase ì„¤ì •
â”‚   â”œâ”€â”€ LaunchScreen.storyboard        # ëŸ°ì¹˜ ìŠ¤í¬ë¦°
â”‚   â””â”€â”€ Assets.xcassets/               # ì•± ì•„ì´ì½˜
â”œâ”€â”€ SefraiOS.xcodeproj/                # Xcode í”„ë¡œì íŠ¸
â”œâ”€â”€ SefraiOS.xcworkspace/              # CocoaPods Workspace
â”œâ”€â”€ Podfile                            # CocoaPods ì˜ì¡´ì„±
â”œâ”€â”€ Podfile.lock                       # ì˜ì¡´ì„± ë²„ì „ ë½
â”œâ”€â”€ codemagic.yaml                     # CI/CD ì„¤ì •
â”œâ”€â”€ build.sh                           # ë¡œì»¬ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .gitignore                         # Git ì œì™¸ íŒŒì¼
â””â”€â”€ [ë¬¸ì„œë“¤]                           # README, ê°€ì´ë“œ ë“±
```

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê¸°ë¡

### ë¬¸ì œ 1: Firebase ë²„ì „ í˜¸í™˜ì„± ì˜¤ë¥˜

**ì¦ìƒ:**
```
Firebase 11.15.0 ë¹Œë“œ ì‹¤íŒ¨
SwiftCompile error: cannot find type 'sending' in scope
```

**í•´ê²°:**
- Firebase ë²„ì „ì„ 10.29.0ìœ¼ë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ
- Podfile ìˆ˜ì • í›„ `pod install` ì¬ì‹¤í–‰
- ë¹Œë“œ ì„±ê³µ

### ë¬¸ì œ 2: GitHub push ì¶©ëŒ

**ì¦ìƒ:**
```
! [rejected] main -> main (fetch first)
Updates were rejected because the remote contains work
```

**í•´ê²°:**
- `ios-app` ë¸Œëœì¹˜ ìƒˆë¡œ ìƒì„±
- í•´ë‹¹ ë¸Œëœì¹˜ë¡œ push ì„±ê³µ
- ì´í›„ Codemagicë„ `ios-app` ë¸Œëœì¹˜ë¡œ ì„¤ì •

### ë¬¸ì œ 3: Codemagic ì¸ì¦ ì˜¤ë¥˜ (ì§„í–‰ ì¤‘)

**ì¦ìƒ:**
```
Authentication credentials are missing or invalid
```

**ì‹œë„í•œ í•´ê²°ì±…:**
- Private Key í˜•ì‹ í™•ì¸
- í™˜ê²½ ë³€ìˆ˜ ì¬ì„¤ì •

**ë‹¤ìŒ ì‹œë„:**
- ì¤„ë°”ê¿ˆ í¬í•¨í•˜ì—¬ Private Key ì¬ì…ë ¥
- ë˜ëŠ” Automatic Code Signing ì‚¬ìš©

---

## ğŸ’¡ í•µì‹¬ ìš”ì•½

### Android â†’ iOS ë³€í™˜ ì™„ë£Œ

| ê¸°ëŠ¥ | Android | iOS | ìƒíƒœ |
|-----|---------|-----|------|
| WebView | `WebView` | `WKWebView` | âœ… |
| ìƒì²´ì¸ì¦ | `BiometricPrompt` | `LAContext` | âœ… |
| JS Bridge | `addJavascriptInterface` | `WKScriptMessageHandler` | âœ… |
| FCM | `FirebaseMessaging` | `FirebaseMessaging` | âœ… |
| ì„¤ì • | `AndroidManifest.xml` | `Info.plist` | âœ… |
| Firebase | `google-services.json` | `GoogleService-Info.plist` | âœ… |

### ë¹Œë“œ ìƒíƒœ
```
ë¡œì»¬ Xcode ë¹Œë“œ: âœ… BUILD SUCCEEDED
CocoaPods ì„¤ì¹˜: âœ… ì™„ë£Œ
GitHub Push: âœ… ios-app ë¸Œëœì¹˜
Codemagic ë¹Œë“œ: â³ ì¸ì¦ ì˜¤ë¥˜ í•´ê²° ëŒ€ê¸°
```

---

## ğŸ“ ê¸´ê¸‰ ì—°ë½ì²˜ & ë§í¬

### Apple Developer
- Portal: https://developer.apple.com/account
- App Store Connect: https://appstoreconnect.apple.com/
- Apple ID: https://appleid.apple.com/

### ì„œë¹„ìŠ¤
- Firebase Console: https://console.firebase.google.com/
- Codemagic: https://codemagic.io
- GitHub: https://github.com/zanoone/sefra

### ë¬¸ì„œ
- Apple Developer Docs: https://developer.apple.com/documentation/
- Firebase iOS Setup: https://firebase.google.com/docs/ios/setup
- Codemagic Docs: https://docs.codemagic.io/

---

## ğŸ¯ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ ì‘ì—…
- [x] iOS ì•± ê°œë°œ (Swift + UIKit)
- [x] WKWebView êµ¬í˜„
- [x] ìƒì²´ì¸ì¦ êµ¬í˜„
- [x] FCM í†µí•©
- [x] JavaScript Bridge
- [x] Firebase ì„¤ì •
- [x] Xcode ë¹Œë“œ ì„±ê³µ
- [x] Git ì €ì¥ì†Œ ì„¤ì •
- [x] GitHub push
- [x] Codemagic ì„¤ì • íŒŒì¼
- [x] ë¬¸ì„œ ì‘ì„±

### ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- [ ] Codemagic ì¸ì¦ ë¬¸ì œ í•´ê²°
- [ ] ì²« ë¹Œë“œ ì„±ê³µ
- [ ] TestFlight ì—…ë¡œë“œ

### ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…
- [ ] ë² íƒ€ í…ŒìŠ¤íŠ¸
- [ ] App Store ì œì¶œ
- [ ] ì•± ì‹¬ì‚¬

---

## ğŸ“ ë©”ëª¨

### Codemagic ì¸ì¦ í•´ê²° ìš°ì„ ìˆœìœ„

**ìš°ì„  ì‹œë„**: Automatic Code Signing
- ì„¤ì • ê°„ë‹¨
- ì˜¤ë¥˜ ê°€ëŠ¥ì„± ë‚®ìŒ
- Apple ID + App-specific passwordë§Œ í•„ìš”

**ëŒ€ì•ˆ**: Private Key ì¬ì…ë ¥
- ì¤„ë°”ê¿ˆ ì •í™•íˆ í¬í•¨
- 6ì¤„ í˜•ì‹ ìœ ì§€
- Secure ì„¤ì •

### ì£¼ì˜ì‚¬í•­
- Private KeyëŠ” ì ˆëŒ€ ë…¸ì¶œ ê¸ˆì§€
- GitHub í† í° ê´€ë¦¬ ì£¼ì˜
- .p8 íŒŒì¼ ë°±ì—… ë³´ê´€
- App-specific password ì•ˆì „í•˜ê²Œ ì €ì¥

### ë‹¤ìŒ ì‘ì—… ì‹œ í™•ì¸í•  ê²ƒ
1. Codemagic ì¸ì¦ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆëŠ”ì§€
2. ë¹Œë“œê°€ ì„±ê³µí–ˆëŠ”ì§€
3. TestFlightì— ì—…ë¡œë“œë˜ì—ˆëŠ”ì§€
4. ë² íƒ€ í…ŒìŠ¤í„° ì¶”ê°€ ì—¬ë¶€

---

## ğŸ” ë³´ì•ˆ ì •ë³´ (ì¤‘ìš”!)

ì´ íŒŒì¼ì—ëŠ” ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
- GitHub í† í°
- Apple Developer Private Key
- Firebase ì„¤ì •

**âš ï¸ ì£¼ì˜:**
- ì´ íŒŒì¼ì€ ì•ˆì „í•œ ê³³ì— ë³´ê´€
- ì™¸ë¶€ ê³µìœ  ê¸ˆì§€
- ì •ê¸°ì ìœ¼ë¡œ í† í° êµì²´

---

**ì‘ì„±ì¼**: 2025-11-09
**ì‘ì„±ì**: AI Assistant
**í”„ë¡œì íŠ¸ ìƒíƒœ**: ë¹Œë“œ ì¤€ë¹„ ì™„ë£Œ, Codemagic ì¸ì¦ ëŒ€ê¸°
**ë‹¤ìŒ ì‘ì—…**: Codemagic ì¸ì¦ ë¬¸ì œ í•´ê²° â†’ ë¹Œë“œ ì‹¤í–‰
